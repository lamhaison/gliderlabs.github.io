<!doctype html>
<html>
<head>
  <title>Blog :: Glider Labs</title>
  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <link rel="shortcut icon" type="image/x-icon" href="/images/dots.png" />
  <link rel="stylesheet" type="text/css"
    href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Condensed:400,700">
  <link href="/stylesheets/normalize.css" rel="stylesheet" /><link href="/stylesheets/syntax.css" rel="stylesheet" /><link href="/stylesheets/global.css" rel="stylesheet" /><link href="/stylesheets/default.css" rel="stylesheet" />
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/atom.xml" />
</head>

<body>
<div id="wrapper">

  <header>
    <div class="container clearfix">
      <nav>
        <ul class="nav">
          <li class="presentation"><h1 id="logo"><a href="/"><img src="/images/gliderlabs.png" /></a></h1></li>
          <li class="presentation"><a href="/services">Services</a></li>
          <li class="presentation"><a href="/blog">Blog</a></li>
          <li class="presentation"><a href="/about">About</a></li>
          <!-- <li class="presentation"><a href="/advocate">Advocate</a></li> -->
          <li class="presentation"><a target="_bank" href="http://github.com/gliderlabs">Open Source</a></li>
          <li class="presentation"><a href="mailto:team+contact@gliderlabs.com"><i class="fa fa-envelope-o"></i>Contact Us</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main" role="main">
    <section>
<div class="container">
<div class="row">
  <div class="col-lg-9">
    <article>
      <h1><a href="/blog/2015/07/20/dockercon-2015-happened/">DockerCon 2015 happened.</a></h1>
      <p class="sub">Glider Labs wrote this on
        July
        20,
        2015</p>

      <p>This year we attended the second annual DockerCon in San Francisco. We almost didn&rsquo;t, as our proposed talks were passed on. My abstracts are often generic sounding placeholders, so I don&rsquo;t blame the conference organizers for skipping over an original Docker team member. Regardless, a month before the event, I got an invitation to moderate lightning talks, as well as to give one.</p>

<p>Separately, our work with Docker, ClusterHQ, and Weaveworks on Docker plugins was announced at the keynote. They gave the three of us a session to introduce Docker plugins in more detail. ClusterHQ has <a href="https://clusterhq.com/2015/07/01/docker-plugins-complete-the-puzzle/">a nice write-up</a>, though The New Stack also has <a href="http://thenewstack.io/the-real-docker-ecosystem-launches-with-plugins/">a good write-up</a> as industry press. I was just pleasantly surprised to see the Glider Labs logo in Solomon&rsquo;s keynote. (However, I&rsquo;m not sure why Mesosphere is mentioned at all.)</p>

<p><img alt="Conway's Life" src="/images/dockercon2015.jpg" /></p>

<p>Besides that it was really great to hear from so many people using Glider Labs projects. Our Alpine image is definitely a hit. We saw a number of Docker employees using it in their demos. Talking to vendors at the booths, it seemed 90% of them were using a Glider Labs project of some kind, whether Alpine, Registrator, or Logspout. This is especially exciting because these projects are just the beginning.</p>

<p>The lightning talks were also fun. I used my lightning talk as an excuse to put together a proof of concept for a project now called Envy. It&rsquo;s a sort of development environment manager, re-envisioning the idea of development environments with containers. I believe somebody suggested it could be a Vagrant killer? I gave the demo several times at DockerCon and it was quite well received.</p>

<p>Definitely looking forward to next year!</p>

<iframe src="https://player.vimeo.com/video/131329120" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>


    </article>

    <a href="/blog/2015/07/20/dockercon-2015-happened/#disqus_thread">Comments</a>
    <br /><br />
  </div>

  <div class="col-lg-3" id="sidebar">
    <p>Glider Labs is a modern DevOps consultancy and systems R&amp;D lab in Austin, Texas.</p>
    <p>We work with clients to build modern service architectures, operations automation, and Docker delivery pipelines.</p>
    <p>We also build open source tools for the future of systems engineering, thanks to our partners and R&amp;D sponsors.</p>
    <p>Glider Labs is owned and operated by <a href="https://twitter.com/andyamok">Andy Shinn</a> and <a href="http://twitter.com/progrium">Jeff Lindsay</a>.</p>

    <p class="social">
    	<h5><a href="http://github.com/gliderlabs">
    		<i class="fa fa-github fa-2x"></i>Github</a></h5>
    	<h5><a href="http://twitter.com/gliderlabs">
    		<i class="fa fa-twitter-square fa-2x"></i>Twitter</a></h5>
    	<h5><a href="/blog/atom.xml">
    		<i class="fa fa-rss-square fa-2x"></i>Feed</a></h5>
    </p>
</div>

</div>
</div>
</section>


<section  class="alternate">
<div class="container">
<div class="row">
  <div class="col-lg-9">
    <article>
      <h1><a href="/blog/2015/04/14/docker-events-explained/">Docker Events Explained</a></h1>
      <p class="sub">Matt Good wrote this on
        April
        14,
        2015</p>

      <p>One of the fantastic features of the Docker platform is the events API. This enables tools like <a href="https://github.com/gliderlabs/registrator">Registrator</a> and <a href="https://github.com/gliderlabs/logspout">Logspout</a> to listen for container events like starting and stopping, then act on them.</p>

<p>The <a href="https://docs.docker.com/reference/api/docker_remote_api_v1.17/#monitor-dockers-events">Docker API documentation</a> provides a list of the available events, but does not include much detail on what they mean and when they will occur. Since many of our tools depend on the events API, we&rsquo;ve put together a chart illustrating the events triggered throughout the lifecycle of a Docker container (as of Docker version 1.5 / API version 1.17):</p>

<p><a href="/images/docker_events.png"><img width="650px" height="371px" alt="Docker events diagram" src="/images/docker_events.png" title="Container-related Docker events" /></a></p>

<p>A few container-related events are not included in this illustration since they are not affected by container state:</p>

<ul>
<li><strong>export</strong> emitted by <code>docker export</code></li>
<li><strong>exec_create</strong> emitted by <code>docker exec</code></li>
<li><strong>exec_start</strong> also emitted by <code>docker exec</code> after <strong>exec_create</strong></li>
</ul>

<p>There are also several events not in this diagram that are related to Docker images rather than containers:</p>

<ul>
<li><strong>import</strong> emitted by <code>docker import</code></li>
<li><strong>pull</strong> emitted by <code>docker pull</code></li>
<li><strong>untag</strong> emitted by <code>docker rmi</code></li>
<li><strong>delete</strong> emitted by <code>docker rmi</code></li>
</ul>

<p>Running <code>docker rmi</code> emits an <code>untag</code> event when removing an image tag name. The <code>rmi</code> command may also emit <code>delete</code> events for any image IDs deleted, either by deleting an image by ID directly, or deleting the last tag referring to it.</p>

<p>We encourage more people to take advantage of the Docker events API, and we hope this diagram is useful. The Docker team is <a href="https://github.com/docker/docker/issues/12164">considering including this diagram in the documentation</a>.</p>


    </article>

    <a href="/blog/2015/04/14/docker-events-explained/#disqus_thread">Comments</a>
    <br /><br />
  </div>
</div>
</div>
</section>
<section >
<div class="container">
<div class="row">
  <div class="col-lg-9">
    <article>
      <h1><a href="/blog/2015/03/31/new-logspout-extensible-docker-logging/">New Logspout: Extensible Docker Logging</a></h1>
      <p class="sub">Jeff Lindsay wrote this on
        March
        31,
        2015</p>

      <p><a href="https://github.com/gliderlabs/logspout">Logspout</a> is a Docker container for stateless, host-level log forwarding. It was designed specifically for Docker container logs. It&rsquo;s one of the earliest standalone components built for the Docker ecosystem, and the canonical way to deal with Docker logs for many.</p>

<p>After Glider Labs adopted the project, we updated and automated its build and release process, switched it to <a href="http://gliderlabs.com/blog/2015/03/20/our-minimal-alpine-linux-image-joins-docker-official-images/">Alpine</a>, and took care of a few long standing bugs. Our next release will focus on a re-architected version that is more modular and more extensible.</p>

<p>You can try it now in master <code>HEAD</code>, which is also tagged on Docker Hub as <code>:master</code>. In preparation for the next release, let us tell you more about it.</p>

<h3>Modules</h3>

<p>Logspout now includes a concept of modules, similar to, say, Nginx modules. Modules are chunks of functionality added or removed at compile-time. In our case, they&rsquo;re added or removed at Docker build-time, with no need for you to set up or install any compiler toolchain.</p>

<p>Managing modules happens in a <code>modules.go</code> source file that is intended for operators to edit. Although it&rsquo;s a Go source file, think of it like a configuration file. No real knowledge of Go is necessary. It looks like this:</p>
<pre class="highlight go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="n">_</span><span class="x"> </span><span class="s">"github.com/gliderlabs/logspout/adapters/raw"</span><span class="x">
    </span><span class="n">_</span><span class="x"> </span><span class="s">"github.com/gliderlabs/logspout/adapters/syslog"</span><span class="x">
    </span><span class="n">_</span><span class="x"> </span><span class="s">"github.com/gliderlabs/logspout/httpstream"</span><span class="x">
    </span><span class="n">_</span><span class="x"> </span><span class="s">"github.com/gliderlabs/logspout/routesapi"</span><span class="x">
    </span><span class="n">_</span><span class="x"> </span><span class="s">"github.com/gliderlabs/logspout/transports/tcp"</span><span class="x">
    </span><span class="n">_</span><span class="x"> </span><span class="s">"github.com/gliderlabs/logspout/transports/udp"</span><span class="x">
</span><span class="p">)</span><span class="x">
</span></code></pre>

<p>These are the default modules used in Logspout. It&rsquo;s safe to remove any of these lines to drop a module. You can also add lines pointing to new Logspout module packages. These packages can live in any repository, allowing you to build your own modules without forking or pushing upstream to the logspout repository.</p>

<p>Editing this file seems to suggest you&rsquo;d need to fork the logspout repository to make a custom build, but you don&rsquo;t. We let you customize <code>modules.go</code> with an <code>ONBUILD</code> hook. With this, making a custom build of Logspout that follows official releases is extremely easy. <a href="https://github.com/gliderlabs/logspout/tree/master/custom">Here is an example.</a></p>

<h3>Adapters and Transports</h3>

<p>Previously, the idea of a &ldquo;Logspout adapter&rdquo; was just a hardcoded function mapping in Logspout. We started with an RFC 3164 &ldquo;syslog&rdquo; adapter, then others contributed two more: a JSON over UDP adapter, and a separate &ldquo;rfc5424&rdquo; adapter for modern syslog. People also asked for TCP syslog, or hacked in support for other adapters like RabbitMQ and Kafka.</p>

<p>Using modules, we now have a real API for adding new and externally maintained adapters. We also support different transports, which can be used by adapters to prevent needing to create adapters for each type of possible transport. For example, the new syslog adapter lets you use UDP, TCP, or any other transport added in the future, such as perhaps <a href="https://github.com/gliderlabs/logspout/blob/master/transports/tls/tls.go">TLS</a>.</p>

<p>We then redesigned our built-in adapters. There is now a single syslog adapter that supports both RFC 5425 (default) and RFC 3164. It&rsquo;s more configurable and out of the box has more sensible defaults. There&rsquo;s also a raw adapter that allows generalized templated log messages over any supported transport.</p>

<h3>Extension Points</h3>

<p>For those interested in writing adapters, or are curious about our extension architecture, Logspout modules are enabled by <a href="https://github.com/progrium/go-extpoints">go-extpoints</a>. This is a library and generator for building extension points in Go programs. Extension points are a mechanism for <a href="http://en.wikipedia.org/wiki/Inversion_of_control">inversion of control</a>, similar to <a href="http://en.wikipedia.org/wiki/Dependency_injection">dependency injection</a>. Each extension point represents a part of Logspout that a module can hook into.</p>

<p>Here is a list of current extension point types in Logspout. Some are more advanced or internally used than others, but are available to module authors nonetheless.</p>

<ul>
<li><strong>AdapterFactory</strong> - allows you to add new types of route adapters (syslog, Kafka, etc)</li>
<li><strong>AdapterTransport</strong> - allows you to add new adapter transports (UDP, TLS, etc)</li>
<li><strong>HttpHandler</strong> - allows you to add new top level endpoints to the HTTP service</li>
<li><strong>Job</strong> - allows you to add parallel running tasks (HTTP server, container pump, etc)</li>
<li><strong>LogRouter</strong> - allows you to add new log routing intakes (containers, syslog, etc)</li>
</ul>

<p>Extension <em>points</em> are package singletons where you register and access objects implementing the type for that extension point. Extension <em>types</em> like those listed above each have their own extension point. Extension types are either a Go interface, where an extension must implement the interface methods, or a function signature type definition, where an extension is literally a callback function.</p>

<p>Here is the simplest example of a module package hooking into an extension point. We implement the <code>HttpHandler</code> function signature, which just says to return a Go <code>http.Handler</code>, and register it with the <code>HttpHandlers</code> extension point on package initialization.</p>
<pre class="highlight go"><code><span class="k">package</span><span class="x"> </span><span class="n">hello</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"github.com/gliderlabs/logspout/router"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">init</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">router</span><span class="o">.</span><span class="n">HttpHandlers</span><span class="o">.</span><span class="n">Register</span><span class="p">(</span><span class="n">HelloHandler</span><span class="p">,</span><span class="x"> </span><span class="s">"hello"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">HelloHandler</span><span class="p">()</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">Handler</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">mux</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewServeMux</span><span class="p">()</span><span class="x">
  </span><span class="n">mux</span><span class="o">.</span><span class="n">HandleFunc</span><span class="p">(</span><span class="s">"/hello"</span><span class="p">,</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">w</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">ResponseWriter</span><span class="p">,</span><span class="x"> </span><span class="n">r</span><span class="x"> </span><span class="o">*</span><span class="n">http</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">w</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="s">"Hello!"</span><span class="p">))</span><span class="x">
  </span><span class="p">})</span><span class="x">
  </span><span class="k">return</span><span class="x"> </span><span class="n">mux</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>

<p>Adding an import for this package in <code>modules.go</code> and rebuilding will add a new <code>/hello</code> endpoint to the Logspout web server.</p>

<p>For more examples, check out the other default modules in the Logspout repository such as <a href="https://github.com/gliderlabs/logspout/tree/master/httpstream">httpstream</a>, <a href="https://github.com/gliderlabs/logspout/tree/master/routesapi">routesapi</a>, and of course the <a href="https://github.com/gliderlabs/logspout/tree/master/adapters">adapter</a> and <a href="https://github.com/gliderlabs/logspout/tree/master/transports">transport</a> modules. Even much of the core Logspout <a href="https://github.com/gliderlabs/logspout/tree/master/router">router package</a> is implemented with extension points.</p>

<h3>Docker Log Drivers</h3>

<p>Docker itself is about to <a href="https://github.com/docker/docker/issues/7195">support log drivers</a>. This introduces improvements to current Docker logging, and lets you recompile Docker with new log drivers.</p>

<p>Logspout will continue to be an easier and more configurable solution for drop-in container log forwarding. The built-in log drivers in Docker will actually help many Logspout deployments, since you&rsquo;ll be able to disable Docker writing logs to local disk. Let Logspout forward logs to where they should really be.</p>

<p>If you have questions about writing modules, using extension points, or using the latest Logspout, let us know via <a href="https://github.com/gliderlabs/logspout/issues">Logspout issues</a>, or join us in <code>#gliderlabs</code> on Freenode.</p>


    </article>

    <a href="/blog/2015/03/31/new-logspout-extensible-docker-logging/#disqus_thread">Comments</a>
    <br /><br />
  </div>
</div>
</div>
</section>
<section  class="alternate">
<div class="container">
<div class="row">
  <div class="col-lg-9">
    <article>
      <h1><a href="/blog/2015/03/20/our-minimal-alpine-linux-image-joins-docker-official-images/">Our minimal Alpine Linux image joins Docker official images</a></h1>
      <p class="sub">Jeff Lindsay wrote this on
        March
        20,
        2015</p>

      <p>When building Docker delivery pipelines, image size is extremely important for fast deploys. Unfortunately, it&rsquo;s too easy to make Docker images over 1GB in size. This is true even when you use many of the official images. It&rsquo;s especially true with many third-party base images. Dockerfile optimization is usually our first priority with clients.</p>

<p><a href="https://www.alpinelinux.org/">Alpine Linux</a> has become our distribution of choice for minimal containers. Since discovering Alpine, we&rsquo;ve been maintaining what&rsquo;s become a fairly popular Docker image for it called <a href="https://registry.hub.docker.com/u/gliderlabs/alpine/"><code>gliderlabs/alpine</code></a>.</p>

<p>We&rsquo;ve been porting many of our open source containers like <a href="https://github.com/gliderlabs/logspout">logspout</a> and <a href="https://github.com/gliderlabs/registrator">registrator</a> to it. Although it&rsquo;s not ideal for every situation, we were still surprised it was not in the Docker standard library. So we began preparing ours to be submitted.</p>

<p>This week we&rsquo;re happy to announce that our image is now merged into the Docker library as an <a href="https://registry.hub.docker.com/_/alpine/">official image</a>. You can now build Alpine Linux based containers with simply <code>FROM alpine</code>.</p>

<p>You can also continue to use <code>gliderlabs/alpine</code>. We use the same <a href="https://github.com/gliderlabs/docker-alpine">repository</a> and <a href="https://circleci.com/gh/gliderlabs/docker-alpine">open build process</a> to build <code>alpine</code> as <code>gliderlabs/alpine</code>. There are slight differences, but are effectively the same.</p>

<p>Whichever one you use, we hope you enjoy using Alpine Linux with Docker!</p>


    </article>

    <a href="/blog/2015/03/20/our-minimal-alpine-linux-image-joins-docker-official-images/#disqus_thread">Comments</a>
    <br /><br />
  </div>
</div>
</div>
</section>


<section class="alternate">
<div class="container">
  <div class="row">
    <div class="col-lg-9">
      <ul class="pager article">

        <li class="previous disabled">
          <a href="#">&larr; Older</a>
        </li>

        <li class="next disabled">
          <a href="#">Newer &rarr;</a>
        </li>

      </ul>
    </div>
  </div>
</div>
</section>

  </main>

  <style>
  footer {
    font-family: roboto;
    background-color: #333;
    font-weight: 300;
    font-size: 15px;
    padding-top: 50px;
    padding-bottom: 20px;
  }
  footer, footer a, footer a:visited {
    color: #888;
  }
  footer h4 {
    text-transform: uppercase;
    font-family: roboto;
    font-weight: 400;
    color: #fcfcfc;
    font-size: 15px;
    letter-spacing: 1px;
    margin-bottom: 10px;
  }
  footer form {
    padding-top: 8px;
    padding-bottom: 8px;
  }
  footer input.email {
    border-top-left-radius: 2px;
    border-bottom-left-radius: 2px;
    background-color: #444 !important;
    border: 0;
    color: #fff;
  }
  footer input.btn {
    border-radius: 0;
    border-top-right-radius: 2px;
    border-bottom-right-radius: 2px;
    border: 0;
  }
</style>
<footer>
  <div class="container">
    <div class="row text-left">
      <div class="col-sm-2">
        <h4>Glider Labs</h4>
        <ul class="list-unstyled">
          <li><a href="/services">Services</a></li>
          <li><a href="http://glider-slackin.herokuapp.com">Community</a></li>
          <li><a href="https://github.com/gliderlabs">Labs</a></li>
          <li><a href="/about">About</a></li>
        </ul>
      </div>
      <div class="col-sm-2">
        <h4>Connect</h4>
        <ul class="list-unstyled">
          <li><a href="http://glider-slackin.herokuapp.com">Slack</a></li>
          <li><a href="/blog">Blog</a></li>
          <li><a href="http://twitter.com/gliderlabs">Twitter</li>
          <li><a href="https://kiwiirc.com/client/irc.freenode.net/#gliderlabs">IRC</a></li>
          <li><a href="https://github.com/gliderlabs">GitHub</a></li>
          <li><a href="https://vimeo.com/gliderlabs">Vimeo</a></li>
        </ul>
      </div>
      <div class="col-sm-3">
        <h4>Projects</h4>
        <ul class="list-unstyled">
          <li><a href="https://github.com/gliderlabs/registrator">Registrator</a></li>
          <li><a href="https://github.com/gliderlabs/docker-consul">Consul for Docker</a></li>
          <li><a href="https://github.com/gliderlabs/docker-alpine">Alpine for Docker</a></li>
          <li><a href="https://github.com/gliderlabs">More...</a></li>
        </ul>
      </div>
      <div class="col-sm-4 col-sm-offset-1">
        <h4>Subscribe for Updates</h4>
        <form action="//gliderlabs.us10.list-manage.com/subscribe/post?u=49c4b06ffd30bcf49ec53c277&amp;id=616ca7efc0"
          method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate form-inline" target="_blank" novalidate>
          <div class="form-group">
            <div class="input-group input-group-md">
              <input type="email" value="" name="EMAIL" class="email form-control" id="mce-EMAIL" placeholder="Email Address" required>
              <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
              <span class="input-group-btn">
                <input type="submit" value="SUBSCRIBE" name="subscribe" id="mc-embedded-subscribe" class="btn btn-default">
              </span>
              <div style="position: absolute; left: -5000px;"><input type="text" name="b_49c4b06ffd30bcf49ec53c277_616ca7efc0" tabindex="-1" value=""></div>
            </div>
          </div>
        </form>
        <small>Short and sweet monthly newsletter on everything we have going on.</small>
      </div>
    </div>
    <div class="row text-left">
      <div class="col-sm-12">
        <br />
        <small>Copyright &copy; Glider Labs 2015<br />
          Made in Austin, Texas.</small>
      </div>
    </div>
  </div>
</footer>


</div>

<script src="/javascripts/all.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-58928488-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
